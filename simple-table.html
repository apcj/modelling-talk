<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Country and Language</title>
    <script type="text/javascript" src="d3/d3.js"></script>
    <script type="text/javascript" src="d3/d3.geom.js"></script>
    <script type="text/javascript" src="d3/d3.layout.js"></script>
    <link type="text/css" rel="stylesheet" href="style.css"/>
    <style type="text/css">
    
    th {
      text-align: left;
    }
    
    table.feature {
      position: relative;
      top: 0px;
      left: 200px;
      font-size: 30px;
    }

    table.feature td, table.feature th {
      padding: 0px 20px 0px 20px;
    }
    
    tr.headers {
      height: 30px;
      opacity: 0;
    }
    
    </style>
  </head>
  <body>
    <div id="body">
      <table class="feature">
        <tr class="headers hidden">
          <th>Country</th>
          <th>Language</th>
        </tr>
      </table>
    </div>
    <script type="text/javascript">

var countries = [
  { country_name: "Argentina", languages: [
  { language_name: "Spanish" }
  ]},
  { country_name: "Australia", languages: [
  { language_name: "English" }
  ]},
  { country_name: "Austria", languages: [
  { language_name: "German" }
  ]},
  { country_name: "Belgium", languages: [
  { language_name: "Dutch" },
  { language_name: "French" },
  { language_name: "German" }
  ]},
  { country_name: "Brazil", languages: [
  { language_name: "Portuguese" }
  ]},
  { country_name: "Canada", languages: [
  { language_name: "English" },
  { language_name: "French" }
  ]},
  { country_name: "China", languages: [
  { language_name: "written: Simplified Chinese" },
  { language_name: "spoken: Mandarin" }
  ]},
  { country_name: "Czech Republic", languages: [
  { language_name: "Czech" },
  { language_name: "Slovak" }
  ]},
  { country_name: "Denmark", languages: [
  { language_name: "Danish" }
  ]}
];


var w = 1024,
    h = 768,
    tableWidth = 300
    margins = { x: 50, y: 200 };

var table = d3.select("table.feature");

var row = table.selectAll("tr")
    .data(countries.map(function (country) { return country.languages.map(function(language) {
      return { country_name: country.country_name, language_name: language.language_name };
    })}).reduce(function(previous, current) { return previous.concat(current); }))
  .enter().append("tr");
  
row.append("td").text(function(d) { return d.country_name; });
row.append("td").text(function(d) { return d.language_name; });

window.animationNext = function() {
  table.transition().duration(1000).style("top", "30px");
  table.select(".headers").transition().duration(1000).style("opacity", 1);
  window.animationNext = null;
}
    </script>
  </body>
</html>
